local plr = game:GetService("Players").LocalPlayer
local mouse = plr:GetMouse()
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

local pings = {}
local function GetPing()
    local sum = 0
    for i = 1, #pings do
        sum = sum + pings[i]
    end
    return sum / #pings
end

local function isMoving()
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        return humanoid.MoveDirection.Magnitude > 0
    end
    return false
end
print("Loaded!")

mouse.KeyDown:Connect(function(key)
    if key == "e" then
        local ping = GetPing() / 1000 
        local standingDelay = 0.744 + 0.99 * ping
        local movingDelay = 1 - ping ^ 0.5
        if isMoving() then
            wait(movingDelay)

-- Script generated by SimpleSpy - credits to exx#9394

local args = {
    [1] = "Shoot",
    [2] = false
}

game:GetService("ReplicatedStorage").GameEvents.ClientAction:FireServer(unpack(args))
print(movingDelay)
        else
            wait(standingDelay)
         

-- Script generated by SimpleSpy - credits to exx#9394

local args = {
    [1] = "Shoot",
    [2] = false
}

game:GetService("ReplicatedStorage").GameEvents.ClientAction:FireServer(unpack(args))
print(standingDelay)
        end
    end
end)

task.spawn(function()
    while task.wait() do
      table.insert(pings, game:GetService("Stats").PerformanceStats.Ping:GetValue())
      if #pings > 10 then
          table.remove(pings, 1)
      end
  end
end)
